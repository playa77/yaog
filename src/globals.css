@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── CSS custom properties (set by React from settings) ── */
:root {
  --font-chat: 'Literata', Georgia, serif;
  --font-ui: 'DM Sans', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', Consolas, monospace;
  --size-chat: 16.5px;
  --size-ui: 13px;
  --size-mono: 14px;
  --line-height-chat: 1.78;
}

/* ── Base reset ── */
* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; padding: 0; }

/* Apply UI font globally */
body {
  font-family: var(--font-ui);
  font-size: var(--size-ui);
}

/* ════════════════════════════════════════════════════════════════
   Scalable UI font-size utility classes.
   ALL derive from --size-ui so the entire interface scales when
   the user moves the slider.  Replaces every hardcoded Tailwind
   text-xs / text-sm / text-[11px] across the app.
   ════════════════════════════════════════════════════════════════ */
.fs-ui-3xs { font-size: calc(var(--size-ui) * 0.769); line-height: 1.5; }  /* ~10px @ 13 */
.fs-ui-2xs { font-size: calc(var(--size-ui) * 0.846); line-height: 1.5; }  /* ~11px @ 13 */
.fs-ui-xs  { font-size: calc(var(--size-ui) * 0.923); line-height: 1.5; }  /* ~12px @ 13 */
.fs-ui     { font-size: var(--size-ui);                line-height: 1.5; }  /* 13px */
.fs-ui-sm  { font-size: calc(var(--size-ui) * 1.077); line-height: 1.45; } /* ~14px @ 13 */
.fs-ui-lg  { font-size: calc(var(--size-ui) * 1.154); line-height: 1.4; }  /* ~15px @ 13 */
.fs-ui-xl  { font-size: calc(var(--size-ui) * 1.231); line-height: 1.35; } /* ~16px @ 13 */
.fs-ui-2xl { font-size: calc(var(--size-ui) * 1.385); line-height: 1.3; }  /* ~18px @ 13 */
.fs-ui-3xl { font-size: calc(var(--size-ui) * 1.538); line-height: 1.25; } /* ~20px @ 13 */
.fs-ui-4xl { font-size: calc(var(--size-ui) * 1.846); line-height: 1.2; }  /* ~24px @ 13 */

/* Monospace scaled sizes */
.fs-mono    { font-family: var(--font-mono); font-size: var(--size-mono); }
.fs-mono-sm { font-family: var(--font-mono); font-size: calc(var(--size-mono) * 0.88); }

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.16); }

/* ════════════════════════════════════════════════════════════════
   Markdown prose inside messages
   ════════════════════════════════════════════════════════════════ */
.prose-chat {
  font-family: var(--font-chat);
  font-size: var(--size-chat);
  line-height: var(--line-height-chat);
}
.prose-chat h1 { @apply font-bold text-text-bright mt-6 mb-3; font-family: var(--font-ui); font-size: calc(var(--size-chat) * 1.5); }
.prose-chat h2 { @apply font-bold text-text-bright mt-5 mb-2; font-family: var(--font-ui); font-size: calc(var(--size-chat) * 1.25); }
.prose-chat h3 { @apply font-bold text-text-bright mt-4 mb-2; font-family: var(--font-ui); font-size: calc(var(--size-chat) * 1.12); }
.prose-chat p  { @apply my-2; }
.prose-chat ul, .prose-chat ol { @apply pl-6 my-2; }
.prose-chat li { @apply my-1; }
.prose-chat strong { @apply text-text-bright font-bold; }
.prose-chat em { @apply italic; }
.prose-chat a { @apply text-accent underline decoration-accent/30 hover:decoration-accent; }

.prose-chat blockquote {
  @apply border-l-2 border-accent/40 pl-4 my-3 italic text-text-muted;
}
.prose-chat hr {
  @apply border-border my-6;
}

/* Inline code */
.prose-chat code {
  font-family: var(--font-mono);
  font-size: var(--size-mono);
  @apply bg-bg-elevated text-accent px-1.5 py-0.5 rounded border border-border;
}
/* Code blocks */
.prose-chat pre {
  @apply bg-[#0B0D12] rounded-lg p-4 my-3 overflow-x-auto border border-border leading-relaxed;
  font-size: var(--size-mono);
}
.prose-chat pre code {
  font-family: var(--font-mono);
  font-size: inherit;
  @apply bg-transparent border-0 p-0 text-inherit rounded-none;
}

/* Tables */
.prose-chat table { @apply w-full border-collapse my-4; font-family: var(--font-ui); font-size: calc(var(--size-ui) * 0.92); }
.prose-chat th { @apply border border-border bg-bg-surface text-accent font-bold p-2.5 text-left uppercase tracking-wide; font-size: calc(var(--size-ui) * 0.85); }
.prose-chat td { @apply border border-border p-2.5; }
.prose-chat tr:nth-child(even) { background: rgba(255,255,255,0.015); }

/* ════════════════════════════════════════════════════════════════
   Attachment badges inside messages
   ════════════════════════════════════════════════════════════════ */
.yaog-attachment-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.4em;
  padding: 0.2em 0.6em;
  border-radius: 0.4em;
  font-family: var(--font-ui);
  font-size: calc(var(--size-ui) * 0.923);
  font-weight: 600;
  color: var(--color-accent, #8B5CF6);
  background: rgba(139, 92, 246, 0.08);
  border: 1px solid rgba(139, 92, 246, 0.15);
  margin: 0.15em 0.25em;
  vertical-align: middle;
}
.yaog-attachments-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4em;
  margin-bottom: 0.5em;
}

/* CRITICAL: Never render raw file content blocks in chat.
   Safety net in case stripping in JS is bypassed somehow. */
.prose-chat .yaog-file-content {
  display: none !important;
}

/* ── Input textarea uses chat font ── */
.input-chat {
  font-family: var(--font-chat);
  font-size: calc(var(--size-chat) * 0.9);
}

/* ── Highlight.js base (dark) ── */
.hljs { color: #ABB2BF; }
.hljs-keyword { color: #C678DD; }
.hljs-string { color: #98C379; }
.hljs-number { color: #D19A66; }
.hljs-comment { color: #5C6370; font-style: italic; }
.hljs-function { color: #61AFEF; }
.hljs-built_in { color: #E5C07B; }
.hljs-title { color: #61AFEF; }
.hljs-attr { color: #D19A66; }
.hljs-params { color: #ABB2BF; }
.hljs-literal { color: #56B6C2; }
.hljs-type { color: #E5C07B; }
